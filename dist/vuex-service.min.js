/*!
 * vuex-service v0.3.8 
 * (c) 2018 james kim
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vuex"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","vuex","lodash"],e):e(t.VuexService=t.VuexService||{},t.Vuex,t._)}(this,function(t,e,n){"use strict";function r(t,e){return function n(){if(!n.hookCalled)return n.hookCalled=!0,t.apply(e,arguments)}}function o(t,e,r,o){try{Object.defineProperty(t,e,{get:function(){return n.get(r,o)}})}catch(t){}}function i(t,e,r){var i=e.$store?e.$store.getters:e.getters,s=Object.keys(i),u=r?new RegExp("^"+r+"/"):new RegExp("");n(s).filter(function(t){return u.test(t)}).map(function(e){var n=(e.replace(u,"").split("/").join("."),e.replace(/[-_\w\d]+\//,""));o(t,n,i,e)}).value()}function s(t,e,r){if(n.isString(r)){if(!n.get(t,r))throw new Error("The function does not exist. "+e+"."+r)}else n.forEach(r,function(r,o){if(!n.get(t,o))throw new Error("The function does not exist. "+e+"."+o)})}function u(t,e,r,o,i){var u=e.$store?e.$store._actions:e._actions,c=Object.keys(u),a=r?new RegExp("^"+r+"/"):new RegExp("");n(c).filter(function(t){return a.test(t)}).map(function(r){var u=r.replace(a,"").split("/").join(".");if(n.get(t,u))throw new Error("duplicate key");var c=e.$store?e.$store:e,f=function(t,e){var n,o=Array.prototype.slice.call(arguments);return n=1===o.length?t:o,c.dispatch(r,n)};i?(n.set(t,u,_.getHook(o,u,f)),n.set(t,"hook",function(e){s(t,o,e);var r=n.partial(_.hook,o).apply(this,[].slice.call(arguments));n.isObject(r)?n.forEach(r,function(e,r){return n.set(t,r,e)}):n.set(t,e,r)}),n.set(t,"pre",function(){return n.partial(_.pre,o).apply(this,[].slice.call(arguments)),t}),n.set(t,"post",function(){return n.partial(_.post,o).apply(this,[].slice.call(arguments)),t})):n.set(t,u,f)}).value()}function c(t,e,r,o,i){var u=e.$store?e.$store._mutations:e._mutations,c=Object.keys(u),a=r?new RegExp("^"+r+"/"):new RegExp("");n(c).filter(function(t){return a.test(t)}).map(function(r){var u=r.replace(a,"").split("/");u.splice(u.length-1,0,"m");var c=u.join("."),f=e.$store?e.$store:e,p=function(t,e){var n={},o=Array.prototype.slice.call(arguments);return n=1===o.length?t:o,f.commit(r,n)};i?(n.set(t,c,_.getHook(o,c,p)),n.set(t,"hook",function(e){s(t,o,e);var r=n.partial(_.hook,o).apply(this,[].slice.call(arguments));n.isObject(r)?n.forEach(r,function(e,r){return n.set(t,r,e)}):n.set(t,e,r)}),n.set(t,"pre",function(){return n.partial(_.pre,o).apply(this,[].slice.call(arguments)),t}),n.set(t,"post",function(){return n.partial(_.post,o).apply(this,[].slice.call(arguments)),t})):n.set(t,c,p)}).value()}function a(t,e,r,o,i){var s=e?n.get(t,e):t;try{Object.defineProperty(s,r,{get:function(){var t=o.$store?o.$store.state:o.state;return n.get(t,i)},set:function(t){var e=o.$store?o.$store.state:o.state;n.set(e,i,t)}})}catch(t){}}function f(t,e,n){p(e,n.split("/").join("."),"",t)}function p(t,e,r,o){var i=t.$store?t.$store.state:t.state,s=e?Object.keys(n.get(i,e)):Object.keys(i);n(s).map(function(i){if(n.get(o,i)){var s=(e+"."+i).replace(/^\./,"");p(t,s,i,o)}else{var u=(e+"."+i).replace(/^\./,"");a(o,r,i,t,u)}}).value()}function l(r,o){void 0===o&&(o={});var i=(o.hook,o.store),s="$$store";t.Store=i?n.partialRight(x(o),i):x(o),r.prototype.hasOwnProperty(s)||(Object.defineProperty(r.prototype,s,{get:function(){return t.Store}}),e.Store.prototype[s]=t.Store)}e="default"in e?e.default:e,n="default"in n?n.default:n;var h={set:function(t,e){var r=e[0],o=e[1];n.set(t,r,o)},add:function(t,e){var r=e[0],o=e[1];n.get(t,r).push(o)},update:function(t,e){var r=e[0],o=e[1];n.isString(r)?n.set(t,r,o):n.merge(r,o)},remove:function(t,e){var r=e[0],o=e[1];n.get(t,r).splice(n.get(t,r).indexOf(o),1)}},y="$$tinyEventListeners",v=function(){this.events={}};v.prototype.$on=function(t,e,n){this[y]||(this[y]={});var r=this[y];if(r[e]||(r[e]=[]),r[e].push(n),t&&t.$on){var o=this;t.$on("hook:beforeDestroy",function(){o.$off(e,n)})}return this},v.prototype.$once=function(t,e,n,r){var o=this,i=function(){r.apply(this,arguments),o.$off(e,i),o.$off(n,i)};return this.$on(t,e,i),this.$on(t,n,i),this},v.prototype.$off=function(t,e){if(!this[y]||!this[y][t])return this;var n=this[y];if(e){var r=n[t],o=r.indexOf(e);o>-1&&r.splice(o,1)}else delete n[t];return this},v.prototype.getListeners=function(t){var e=this;return Object.keys(e[y]).filter(function(e){return new RegExp(e.replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(t)}).reduce(function(t,n){return t.concat(e[y][n])},[])},v.prototype.$emit=function(t){if(this[y]){for(var e=this.getListeners.call(this,t),n=[].slice.call(arguments,1),r=0;r<e.length;r++)e[r].apply(null,n);return this}},v.prototype.getInstance=function(t){var e=this;if(this.events[t])return this.events[t];var n={$emit:function(n,r){e.$emit(t+"."+n,r)},$broadcast:function(t,n){e.$emit("__All__."+t,n)},$on:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),e.$on(n,t+"."+r,o),e.$on(n,"__All__."+r,o)},$once:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),e.$once(n,t+"."+r,"__All__."+r,o)},$off:function(n,r){e.$off(t+"."+n,r),e.$off("__All__."+n,r)}};return this.events[t]=n,n};var g=new v,d={},$={},m={},w=function(){};w.prototype.getHook=function(t,e,n){var r=m[t];return r&&r[e]||n},w.prototype.hook=function(t,e,n,o){var i=this;if(2===arguments.length&&"object"==typeof e){var s={};for(var u in e)s[u]=i.hook(t,u,e[u]);return s}var c=m[t]=m[t]||{},a=d[t]=d[t]||{},f=$[t]=$[t]||{};return a[e]=a[e]||[],f[e]=f[e]||[],c[e]?c[e]:(c[e]=function(){function t(t){if(t&&t instanceof Error)return i(t);--g||$.apply(u,s)}function i(t){if("function"==typeof p)return p(t);if(o)return o.call(u,t);throw t}var s,u=this,p=arguments[arguments.length-1],l=a[e],h=f[e],y=l.length,v=-1,g=c[e].numAsyncPres,d=function(){if(arguments[0]instanceof Error)return i(arguments[0]);var n,o,a=Array.prototype.slice.call(arguments);if(!a.length||null==arguments[0]&&"function"==typeof p||(s=a),++v<y){if(n=l[v],n.isAsync&&n.length<2)throw new Error("Your pre must have next and done arguments -- e.g., function (next, done, ...)");if(n.length<1)throw new Error("Your pre must have a next argument -- e.g., function (next, ...)");return o=(n.isAsync?[r(d),r(t)]:[r(d)]).concat(s),n.apply(u,o)}return c[e].numAsyncPres?void 0:$.apply(u,s)},$=function(){var t,e,o,c,a=Array.prototype.slice.call(arguments);if(v===y)return c=function(){if(arguments[0]instanceof Error)return i(arguments[0]);var t,n,a=Array.prototype.slice.call(arguments,1);if(a.length&&(s=a),++o<e){if(t=h[o],t.length<1)throw new Error("Your post must have a next argument -- e.g., function (next, ...)");return n=[r(c)].concat(s),t.apply(u,n)}return"function"==typeof p?p.apply(u,arguments):void 0},"function"==typeof p&&(a[a.length-1]=r(c)),e=h.length,o=-1,t=n.apply(u,a),e&&"function"!=typeof p?c():t};return d.apply(this,arguments)},c[e].numAsyncPres=0,c[e])},w.prototype.pre=function(t,e,n,r,o){"boolean"!=typeof arguments[2]&&(o=r,r=n,n=!1);var i=m[t]=m[t]||{},s=d[t]=d[t]||{};return this._lazySetupHooks(t,i,e,o),(r.isAsync=n)&&i[e].numAsyncPres++,(s[e]=s[e]||[]).push(r),this},w.prototype.post=function(t,e,n,r){3===arguments.length&&(r=n,n=!1);var o=m[t]=m[t]||{},i=$[t]=$[t]||{};return this._lazySetupHooks(t,o,e),(i[e]=i[e]||[]).push(r),this},w.prototype.removePre=function(t,e,n){var r=(m[t]=m[t]||{},d[t]=d[t]||{});return r[e]?(2===arguments.length?r[e].length=0:r[e]=r[e].filter(function(t){return t!==n}),this):this},w.prototype._lazySetupHooks=function(t,e,n,r){if(!e[n])throw new Error("The hook is not set. "+t+"."+n);void 0===e[n].numAsyncPres&&this.hook(n,e[n],r)};var _=new w;n.bindAll(_,function(t){return n.without(Object.getOwnPropertyNames(Object.getPrototypeOf(t)),"constructor")}(_));var k={},x=function(t){var e=t.hook;return function(t,r){void 0===t&&(t="");var o=this;n.isString(t)||(r=t,t=""),r&&(o=r);var s,a=t.trim().replace(" ","").split(","),p={};return a.forEach(function(t){var r=/.+\/([-_\w\d]+)$/;if(s=(r.test(t)?r.exec(t)[1]:t)||"Root",k[s])return void(p[s]=k[s]);var a={};i(a,o,t),u(a,o,t,s,e),c(a,o,t,s,e),f(a,o,t),n.merge(a,g.getInstance(t)),p[s]=a,k[s]=a}),a.length>1?p:p[s]}};l.version="0.3.8",t.default=l,t.defaultMutations=h,Object.defineProperty(t,"__esModule",{value:!0})});