/*!
 * vuex-service v0.1.15 
 * (c) 2018 james kim
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vuex"),require("lodash"),require("vue")):"function"==typeof define&&define.amd?define(["exports","vuex","lodash","vue"],t):t(e.VuexService=e.VuexService||{},e.Vuex,e._,e.Vue)}(this,function(e,t,n,r){"use strict";function o(e,t,r){var o=t.$store?t.$store.getters:t.getters,i=Object.keys(o),s=r?new RegExp("^"+r+"/"):new RegExp("");n(i).filter(function(e){return s.test(e)}).map(function(t){var r=t.replace(s,"").split("/").join(".");n.set(e,r,o[t])}).value()}function i(e,t,r){var o=t.$store?t.$store._actions:t._actions,i=Object.keys(o),s=r?new RegExp("^"+r+"/"):new RegExp("");n(i).filter(function(e){return s.test(e)}).map(function(r){var o=r.replace(s,"").split("/").join(".");if(n.get(e,o))throw new Error("duplicate key");var i=t.$store?t.$store:t;n.set(e,o,function(e,t){var o=e;return n.isUndefined(t)||(o={prop:e,src:e,value:t}),i.dispatch(r,o)})}).value()}function s(e,t,r){var o=t.$store?t.$store._mutations:t._mutations,i=Object.keys(o),s=r?new RegExp("^"+r+"/"):new RegExp("");n(i).filter(function(e){return s.test(e)}).map(function(r){var o=r.replace(s,"").split("/");o.splice(o.length-1,0,"m");var i=o.join("."),u=t.$store?t.$store:t;n.set(e,i,function(e,t){var o={};return n.isUndefined(t)?o=e:(o.prop=e,o.src=e,o.value=t),u.commit(r,o)})}).value()}function u(e,t,n){f(t.$store?t.$store.state:t.state,n.split("/").join("."),e)}function f(e,t,r){var o=t?Object.keys(n.get(e,t)):Object.keys(e);n(o).map(function(o){if(n.get(r,o)){f(t?n.get(e,t):e,o,r[o])}else{var i=t?t+"."+o:o;n.set(r,o,n.get(e,i))}}).value()}function a(e){return e[0].toUpperCase()+e.substring(1)}function c(e,t){void 0===e&&(e="");var r=this;t&&(r=t);var f,c=e.trim().replace(" ","").split(","),p={};return c.forEach(function(e){var t={};o(t,r,e),i(t,r,e),s(t,r,e),u(t,r,e),n.merge(t,$.getInstance(e));var c=/.+\/([-_\w\d]+)$/;f=(c.test(e)?a(c.exec(e)[1]):e)||"Root",p[f]=t}),c.length>1?p:p[f]}function p(e,n){void 0===n&&(n={});var r="$$store";e.prototype.hasOwnProperty(r)||(Object.defineProperty(e.prototype,r,{get:function(){return c}}),t.Store.prototype[r]=c)}t="default"in t?t.default:t,n="default"in n?n.default:n,r="default"in r?r.default:r;var l={set:function(e,t){var r=t.prop,o=t.value;n.set(e,r,o)},add:function(e,t){var r=t.prop,o=t.value;n.get(e,r).push(o)},update:function(e,t){var r=t.prop,o=t.value;n.isString(r)?n.set(e,r,o):n.merge(r,o)},remove:function(e,t){var r=t.prop,o=t.value;n.get(e,r).splice(n.get(e,r).indexOf(o),1)}},v="$$tinyEventListeners",h=function(){this.eventBus=new r,this.events={}};h.prototype.$on=function(e,t,n){this[v]||(this[v]={});var r=this[v];if(r[t]||(r[t]=[]),r[t].push(n),e&&e.$on){var o=this;console.log("read to remove"),e.$on("hook:beforeDestroy",function(){console.log("beforeDestroy hook called in eventbus"),o.$off(t,n)})}return this},h.prototype.$once=function(e,t,n,r){var o=this,i=function(){r.apply(this,arguments),o.$off(t,i),o.$off(n,i)};return this.$on(e,t,i),this.$on(e,n,i),this},h.prototype.$off=function(e,t){if(!this[v]||!this[v][e])return this;var n=this[v];if(t){var r=n[e],o=r.indexOf(t);o>-1&&r.splice(o,1)}else delete n[e];return this},h.prototype.getListeners=function(e){var t=this;return Object.keys(t[v]).filter(function(t){return new RegExp(t.replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(e)}).reduce(function(e,n){return e.concat(t[v][n])},[])},h.prototype.$emit=function(e){if(this[v]){for(var t=this.getListeners.call(this,e),n=[].slice.call(arguments,1),r=0;r<t.length;r++)t[r].apply(null,n);return this}},h.prototype.getInstance=function(e){var t=this;if(this.events[e])return this.events[e];var n={$emit:function(n,r){t.$emit(e+"."+n,r)},$broadcast:function(e,n){t.$emit("__All__."+e,n)},$on:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),t.$on(n,e+"."+r,o),t.$on(n,"__All__."+r,o)},$once:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),t.$once(n,e+"."+r,"__All__."+r,o)},$off:function(n,r){t.$off(e+"."+n,r),t.$off("__All__."+n,r)}};return this.events[e]=n,n};var $=new h;p.version="0.1.15",e.default=p,e.Store=c,e.defaultMutations=l,Object.defineProperty(e,"__esModule",{value:!0})});