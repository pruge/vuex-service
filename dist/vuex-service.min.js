/*!
 * vuex-service v0.2.1 
 * (c) 2018 james kim
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vuex"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","vuex","lodash"],e):e(t.VuexService=t.VuexService||{},t.Vuex,t._)}(this,function(t,e,n){"use strict";function r(t,e,r){var o=e.$store?e.$store.getters:e.getters,i=Object.keys(o),s=r?new RegExp("^"+r+"/"):new RegExp("");n(i).filter(function(t){return s.test(t)}).map(function(e){var r=e.replace(s,"").split("/").join(".");n.set(t,r,o[e])}).value()}function o(t,e,r){var o=e.$store?e.$store._actions:e._actions,i=Object.keys(o),s=r?new RegExp("^"+r+"/"):new RegExp("");n(i).filter(function(t){return s.test(t)}).map(function(r){var o=r.replace(s,"").split("/").join(".");if(n.get(t,o))throw new Error("duplicate key");var i=e.$store?e.$store:e;n.set(t,o,function(t,e){var n,o=Array.prototype.slice.call(arguments);return n=1===o.length?t:o,i.dispatch(r,n)})}).value()}function i(t,e,r){var o=e.$store?e.$store._mutations:e._mutations,i=Object.keys(o),s=r?new RegExp("^"+r+"/"):new RegExp("");n(i).filter(function(t){return s.test(t)}).map(function(r){var o=r.replace(s,"").split("/");o.splice(o.length-1,0,"m");var i=o.join("."),u=e.$store?e.$store:e;n.set(t,i,function(t,e){var n={},o=Array.prototype.slice.call(arguments);return n=1===o.length?t:o,u.commit(r,n)})}).value()}function s(t,e,n){u(e.$store?e.$store.state:e.state,n.split("/").join("."),t)}function u(t,e,r){var o=e?Object.keys(n.get(t,e)):Object.keys(t);n(o).map(function(o){if(n.get(r,o)){u(e?n.get(t,e):t,o,r[o])}else{var i=e?e+"."+o:o;n.set(r,o,n.get(t,i))}}).value()}function f(t,e){void 0===t&&(t="");var u=this;e&&(u=e);var f,c=t.trim().replace(" ","").split(","),a={};return c.forEach(function(t){var e={};r(e,u,t),o(e,u,t),i(e,u,t),s(e,u,t),n.merge(e,v.getInstance(t));var c=/.+\/([-_\w\d]+)$/;f=(c.test(t)?c.exec(t)[1]:t)||"Root",a[f]=e}),c.length>1?a:a[f]}function c(t,n){void 0===n&&(n={});var r="$$store";t.prototype.hasOwnProperty(r)||(Object.defineProperty(t.prototype,r,{get:function(){return f}}),e.Store.prototype[r]=f)}e="default"in e?e.default:e,n="default"in n?n.default:n;var a={set:function(t,e){var r=e[0],o=e[1];n.set(t,r,o)},add:function(t,e){var r=e[0],o=e[1];n.get(t,r).push(o)},update:function(t,e){var r=e[0],o=e[1];n.isString(r)?n.set(t,r,o):n.merge(r,o)},remove:function(t,e){var r=e[0],o=e[1];n.get(t,r).splice(n.get(t,r).indexOf(o),1)}},l="$$tinyEventListeners",p=function(){this.events={}};p.prototype.$on=function(t,e,n){this[l]||(this[l]={});var r=this[l];if(r[e]||(r[e]=[]),r[e].push(n),t&&t.$on){var o=this;t.$on("hook:beforeDestroy",function(){o.$off(e,n)})}return this},p.prototype.$once=function(t,e,n,r){var o=this,i=function(){r.apply(this,arguments),o.$off(e,i),o.$off(n,i)};return this.$on(t,e,i),this.$on(t,n,i),this},p.prototype.$off=function(t,e){if(!this[l]||!this[l][t])return this;var n=this[l];if(e){var r=n[t],o=r.indexOf(e);o>-1&&r.splice(o,1)}else delete n[t];return this},p.prototype.getListeners=function(t){var e=this;return Object.keys(e[l]).filter(function(e){return new RegExp(e.replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(t)}).reduce(function(t,n){return t.concat(e[l][n])},[])},p.prototype.$emit=function(t){if(this[l]){for(var e=this.getListeners.call(this,t),n=[].slice.call(arguments,1),r=0;r<e.length;r++)e[r].apply(null,n);return this}},p.prototype.getInstance=function(t){var e=this;if(this.events[t])return this.events[t];var n={$emit:function(n,r){e.$emit(t+"."+n,r)},$broadcast:function(t,n){e.$emit("__All__."+t,n)},$on:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),e.$on(n,t+"."+r,o),e.$on(n,"__All__."+r,o)},$once:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),e.$once(n,t+"."+r,"__All__."+r,o)},$off:function(n,r){e.$off(t+"."+n,r),e.$off("__All__."+n,r)}};return this.events[t]=n,n};var v=new p;c.version="0.2.1",t.default=c,t.Store=f,t.defaultMutations=a,Object.defineProperty(t,"__esModule",{value:!0})});