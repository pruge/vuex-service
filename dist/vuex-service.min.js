/*!
 * vuex-service v0.1.6 
 * (c) 2018 james kim
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vuex"),require("lodash"),require("vue")):"function"==typeof define&&define.amd?define(["exports","vuex","lodash","vue"],t):t(e.VuexService=e.VuexService||{},e.Vuex,e._,e.Vue)}(this,function(e,t,n,o){"use strict";function r(e,t,o){var r=t.$store?t.$store.getters:t.getters,i=Object.keys(r),s=new RegExp("^"+o+"/");n(i).filter(function(e){return s.test(e)}).map(function(t){var o=t.replace(s,"").split("/").join(".");n.set(e,o,r[t])}).value()}function i(e,t,o){var r=t.$store?t.$store._actions:t._actions,i=Object.keys(r),s=new RegExp("^"+o+"/");n(i).filter(function(e){return s.test(e)}).map(function(o){var r=o.replace(s,"").split("/").join(".");if(n.get(e,r))throw new Error("duplicate key");var i=t.$store?t.$store:t;n.set(e,r,function(e,t){var r=e;n.isUndefined(t)||(r={prop:e,src:e,value:t}),i.dispatch(o,r)})}).value()}function s(e,t,o){var r=t.$store?t.$store._mutations:t._mutations,i=Object.keys(r),s=new RegExp("^"+o+"/");n(i).filter(function(e){return s.test(e)}).map(function(o){var r=o.replace(s,"").split("/");r.splice(r.length-1,0,"m");var i=r.join("."),u=t.$store?t.$store:t;n.set(e,i,function(e,t){var r={};n.isUndefined(t)?r=e:(r.prop=e,r.src=e,r.value=t),u.commit(o,r)})}).value()}function u(e,t,n){c(t.$store?t.$store.state:t.state,n.split("/").join("."),e)}function c(e,t,o){var r=Object.keys(n.get(e,t));n(r).map(function(r){n.get(o,r)?c(n.get(e,t),r,o[r]):n.set(o,r,n.get(e,t+"."+r))}).value()}function f(e,t){var o=this;t&&(o=t);var c={};return r(c,o,e),i(c,o,e),s(c,o,e),u(c,o,e),n.merge(c,$.getInstance(e)),c}function a(e,n){void 0===n&&(n={});var o="$$store";e.prototype.hasOwnProperty(o)||(Object.defineProperty(e.prototype,o,{get:function(){return f}}),t.Store.prototype[o]=f)}t="default"in t?t.default:t,n="default"in n?n.default:n,o="default"in o?o.default:o;var l={set:function(e,t){var o=t.prop,r=t.value;n.set(e,o,r)},add:function(e,t){var o=t.prop,r=t.value;n.get(e,o).push(r)},update:function(e,t){var o=t.prop,r=t.value;n.isString(o)?n.set(e,o,r):n.merge(o,r)},remove:function(e,t){var o=t.prop,r=t.value;n.get(e,o).splice(n.get(e,o).indexOf(r),1)}},p="$$tinyEventListeners",v=function(){this.eventBus=new o,this.events={}};v.prototype.$on=function(e,t){this[p]||(this[p]={});var n=this[p];return n[e]||(n[e]=[]),n[e].push(t),this},v.prototype.$once=function(e,t,n){var o=this,r=function(){n.apply(this,arguments),o.$off(e,r),o.$off(t,r)};return this.$on(e,r),this.$on(t,r),this},v.prototype.$off=function(e,t){if(!this[p]||!this[p][e])return this;var n=this[p];if(t){var o=n[e],r=o.indexOf(t);r>-1&&o.splice(r,1)}else delete n[e];return this},v.prototype.getListeners=function(e){var t=this;return Object.keys(t[p]).filter(function(t){return new RegExp(t.replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(e)}).reduce(function(e,n){return e.concat(t[p][n])},[])},v.prototype.$emit=function(e){if(this[p]){for(var t=this.getListeners.call(this,e),n=[].slice.call(arguments,1),o=0;o<t.length;o++)t[o].apply(null,n);return this}},v.prototype.getInstance=function(e){var t=this;if(this.events[e])return this.events[e];var n={$emit:function(n,o){console.log("$emit",e+"."+n),t.$emit(e+"."+n,o)},$broadcast:function(e,n){console.log("$broadcast",""+e),t.$emit("__All__."+e,n)},$on:function(n,o){console.log("$on",e+"."+n),t.$on(e+"."+n,o),t.$on("__All__."+n,o)},$once:function(n,o){console.log("$once",e+"."+n),t.$once(e+"."+n,"__All__."+n,o)},$off:function(n,o){console.log("$off",e+"."+n),t.$off(e+"."+n,o),t.$off("__All__."+n,o)}};return this.events[e]=n,n};var $=new v;a.version="0.1.6",e.default=a,e.Store=f,e.defaultMutations=l,Object.defineProperty(e,"__esModule",{value:!0})});