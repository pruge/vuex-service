/*!
 * vuex-service v0.3.8 
 * (c) 2018 james kim
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vuex"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","vuex","lodash"],e):e(t.VuexService=t.VuexService||{},t.Vuex,t._)}(this,function(t,e,n){"use strict";function r(t,e){return function n(){if(!n.hookCalled)return n.hookCalled=!0,t.apply(e,arguments)}}function o(t,e,r){var o=e.$store?e.$store.getters:e.getters,i=Object.keys(o),s=r?new RegExp("^"+r+"/"):new RegExp("");n(i).filter(function(t){return s.test(t)}).map(function(e){var r=e.replace(s,"").split("/").join(".");n.set(t,r,o[e])}).value()}function i(t,e,r){if(n.isString(r)){if(!n.get(t,r))throw new Error("The function does not exist. "+e+"."+r)}else n.forEach(r,function(r,o){if(!n.get(t,o))throw new Error("The function does not exist. "+e+"."+o)})}function s(t,e,r,o,s){var u=e.$store?e.$store._actions:e._actions,c=Object.keys(u),a=r?new RegExp("^"+r+"/"):new RegExp("");n(c).filter(function(t){return a.test(t)}).map(function(r){var u=r.replace(a,"").split("/").join(".");if(n.get(t,u))throw new Error("duplicate key");var c=e.$store?e.$store:e,f=function(t,e){var n,o=Array.prototype.slice.call(arguments);return n=1===o.length?t:o,c.dispatch(r,n)};s?(n.set(t,u,m.getHook(o,u,f)),n.set(t,"hook",function(e){i(t,o,e);var r=n.partial(m.hook,o).apply(this,[].slice.call(arguments));n.set(t,e,r)}),n.set(t,"pre",function(){return n.partial(m.pre,o).apply(this,[].slice.call(arguments)),t}),n.set(t,"post",function(){return n.partial(m.post,o).apply(this,[].slice.call(arguments)),t})):n.set(t,u,f)}).value()}function u(t,e,r,o,s){var u=e.$store?e.$store._mutations:e._mutations,c=Object.keys(u),a=r?new RegExp("^"+r+"/"):new RegExp("");n(c).filter(function(t){return a.test(t)}).map(function(r){var u=r.replace(a,"").split("/");u.splice(u.length-1,0,"m");var c=u.join("."),f=e.$store?e.$store:e,p=function(t,e){var n={},o=Array.prototype.slice.call(arguments);return n=1===o.length?t:o,f.commit(r,n)};s?(n.set(t,c,m.getHook(o,c,p)),n.set(t,"hook",function(e){i(t,o,e);var r=n.partial(m.hook,o).apply(this,[].slice.call(arguments));n.set(t,e,r)}),n.set(t,"pre",function(){return n.partial(m.pre,o).apply(this,[].slice.call(arguments)),t}),n.set(t,"post",function(){return n.partial(m.post,o).apply(this,[].slice.call(arguments)),t})):n.set(t,c,p)}).value()}function c(t,e,n){a(e.$store?e.$store.state:e.state,n.split("/").join("."),t)}function a(t,e,r){var o=e?Object.keys(n.get(t,e)):Object.keys(t);n(o).map(function(o){if(n.get(r,o)){a(e?n.get(t,e):t,o,r[o])}else{var i=e?e+"."+o:o;n.set(r,o,n.get(t,i))}}).value()}function f(n,r){void 0===r&&(r={});var o=(r.hook,"$$store");t.Store=w(r),n.prototype.hasOwnProperty(o)||(Object.defineProperty(n.prototype,o,{get:function(){return t.Store}}),e.Store.prototype[o]=t.Store)}e="default"in e?e.default:e,n="default"in n?n.default:n;var p={set:function(t,e){var r=e[0],o=e[1];n.set(t,r,o)},add:function(t,e){var r=e[0],o=e[1];n.get(t,r).push(o)},update:function(t,e){var r=e[0],o=e[1];n.isString(r)?n.set(t,r,o):n.merge(r,o)},remove:function(t,e){var r=e[0],o=e[1];n.get(t,r).splice(n.get(t,r).indexOf(o),1)}},l="$$tinyEventListeners",h=function(){this.events={}};h.prototype.$on=function(t,e,n){this[l]||(this[l]={});var r=this[l];if(r[e]||(r[e]=[]),r[e].push(n),t&&t.$on){var o=this;t.$on("hook:beforeDestroy",function(){o.$off(e,n)})}return this},h.prototype.$once=function(t,e,n,r){var o=this,i=function(){r.apply(this,arguments),o.$off(e,i),o.$off(n,i)};return this.$on(t,e,i),this.$on(t,n,i),this},h.prototype.$off=function(t,e){if(!this[l]||!this[l][t])return this;var n=this[l];if(e){var r=n[t],o=r.indexOf(e);o>-1&&r.splice(o,1)}else delete n[t];return this},h.prototype.getListeners=function(t){var e=this;return Object.keys(e[l]).filter(function(e){return new RegExp(e.replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(t)}).reduce(function(t,n){return t.concat(e[l][n])},[])},h.prototype.$emit=function(t){if(this[l]){for(var e=this.getListeners.call(this,t),n=[].slice.call(arguments,1),r=0;r<e.length;r++)e[r].apply(null,n);return this}},h.prototype.getInstance=function(t){var e=this;if(this.events[t])return this.events[t];var n={$emit:function(n,r){e.$emit(t+"."+n,r)},$broadcast:function(t,n){e.$emit("__All__."+t,n)},$on:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),e.$on(n,t+"."+r,o),e.$on(n,"__All__."+r,o)},$once:function(n,r,o){"string"==typeof n&&(o=r,r=n,n=null),e.$once(n,t+"."+r,"__All__."+r,o)},$off:function(n,r){e.$off(t+"."+n,r),e.$off("__All__."+n,r)}};return this.events[t]=n,n};var y=new h,v={},g={},d={},$=function(){};$.prototype.getHook=function(t,e,n){var r=d[t];return r&&r[e]||n},$.prototype.hook=function(t,e,n,o){var i=this;{if(2!==arguments.length||"object"!=typeof e){var s=d[t]=d[t]||{},u=v[t]=v[t]||{},c=g[t]=g[t]||{};return u[e]=u[e]||[],(c[e]=c[e]||[],s[e])?s[e]:(s[e]=function(){function t(t){if(t&&t instanceof Error)return i(t);--g||$.apply(f,a)}function i(t){if("function"==typeof p)return p(t);if(o)return o.call(f,t);throw t}var a,f=this,p=arguments[arguments.length-1],l=u[e],h=c[e],y=l.length,v=-1,g=s[e].numAsyncPres,d=function(){if(arguments[0]instanceof Error)return i(arguments[0]);var n,o,u=Array.prototype.slice.call(arguments);if(!u.length||null==arguments[0]&&"function"==typeof p||(a=u),++v<y){if(n=l[v],n.isAsync&&n.length<2)throw new Error("Your pre must have next and done arguments -- e.g., function (next, done, ...)");if(n.length<1)throw new Error("Your pre must have a next argument -- e.g., function (next, ...)");return o=(n.isAsync?[r(d),r(t)]:[r(d)]).concat(a),n.apply(f,o)}return s[e].numAsyncPres?void 0:$.apply(f,a)},$=function(){var t,e,o,s,u=Array.prototype.slice.call(arguments);if(v===y)return s=function(){if(arguments[0]instanceof Error)return i(arguments[0]);var t,n,u=Array.prototype.slice.call(arguments,1);if(u.length&&(a=u),++o<e){if(t=h[o],t.length<1)throw new Error("Your post must have a next argument -- e.g., function (next, ...)");return n=[r(s)].concat(a),t.apply(f,n)}return"function"==typeof p?p.apply(f,arguments):void 0},"function"==typeof p&&(u[u.length-1]=r(s)),e=h.length,o=-1,t=n.apply(f,u),e&&"function"!=typeof p?s():t};return d.apply(this,arguments)},s[e].numAsyncPres=0,s[e])}for(var a in e)i.hook(t,a,e[a])}},$.prototype.pre=function(t,e,n,r,o){"boolean"!=typeof arguments[2]&&(o=r,r=n,n=!1);var i=d[t]=d[t]||{},s=v[t]=v[t]||{};return this._lazySetupHooks(t,i,e,o),(r.isAsync=n)&&i[e].numAsyncPres++,(s[e]=s[e]||[]).push(r),this},$.prototype.post=function(t,e,n,r){3===arguments.length&&(r=n,n=!1);var o=d[t]=d[t]||{},i=g[t]=g[t]||{};return this._lazySetupHooks(t,o,e),(i[e]=i[e]||[]).push(r),this},$.prototype.removePre=function(t,e,n){var r=(d[t]=d[t]||{},v[t]=v[t]||{});return r[e]?(2===arguments.length?r[e].length=0:r[e]=r[e].filter(function(t){return t!==n}),this):this},$.prototype._lazySetupHooks=function(t,e,n,r){if(!e[n])throw new Error("The hook is not set. "+t+"."+n);void 0===e[n].numAsyncPres&&this.hook(n,e[n],r)};var m=new $;n.bindAll(m,function(t){return n.without(Object.getOwnPropertyNames(Object.getPrototypeOf(t)),"constructor")}(m));var w=function(t){var e=t.hook;return function(t,r){void 0===t&&(t="");var i=this;n.isString(t)||(r=t,t=""),r&&(i=r);var a,f=t.trim().replace(" ","").split(","),p={};return f.forEach(function(t){var r=/.+\/([-_\w\d]+)$/;a=(r.test(t)?r.exec(t)[1]:t)||"Root";var f={};o(f,i,t),s(f,i,t,a,e),u(f,i,t,a,e),c(f,i,t),n.merge(f,y.getInstance(t)),p[a]=f}),f.length>1?p:p[a]}};f.version="0.3.8",t.default=f,t.defaultMutations=p,Object.defineProperty(t,"__esModule",{value:!0})});